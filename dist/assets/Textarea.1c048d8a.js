import{Y as S,Z as _,$ as D,r as n,a0 as E,a1 as R,a2 as T,a3 as I,j as t,a as w,N as y,X as W,h as G}from"./main.34e66e24.js";import{C as P}from"./CircleLoading.0f83503b.js";function H(u,l){var f=S(l==null?void 0:l.client);_(u,D.Mutation);var m=n.exports.useState({called:!1,loading:!1,client:f}),i=m[0],p=m[1],e=n.exports.useRef({result:i,mutationId:0,isMounted:!0,client:f,mutation:u,options:l});Object.assign(e.current,{client:f,options:l,mutation:u});var b=n.exports.useCallback(function(s){s===void 0&&(s={});var g=e.current,x=g.client,C=g.options,j=g.mutation,L=E(E({},C),{mutation:j});!e.current.result.loading&&!L.ignoreResults&&p(e.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:x});var h=++e.current.mutationId,k=R(L,s);return x.mutate(k).then(function(r){var o,d,a,v=r.data,c=r.errors,U=c&&c.length>0?new T({graphQLErrors:c}):void 0;if(h===e.current.mutationId&&!k.ignoreResults){var M={called:!0,loading:!1,data:v,error:U,client:x};e.current.isMounted&&!I(e.current.result,M)&&p(e.current.result=M)}return(d=(o=e.current.options)===null||o===void 0?void 0:o.onCompleted)===null||d===void 0||d.call(o,r.data),(a=s.onCompleted)===null||a===void 0||a.call(s,r.data),r}).catch(function(r){var o,d,a,v;if(h===e.current.mutationId&&e.current.isMounted){var c={loading:!1,error:r,data:void 0,called:!0,client:x};I(e.current.result,c)||p(e.current.result=c)}if(((o=e.current.options)===null||o===void 0?void 0:o.onError)||k.onError)return(a=(d=e.current.options)===null||d===void 0?void 0:d.onError)===null||a===void 0||a.call(d,r),(v=s.onError)===null||v===void 0||v.call(s,r),{data:void 0,errors:r};throw r})},[]),N=n.exports.useCallback(function(){p({called:!1,loading:!1,client:f})},[]);return n.exports.useEffect(function(){return e.current.isMounted=!0,function(){e.current.isMounted=!1}},[]),[b,E({reset:N},i)]}const V=({className:u="block",children:l})=>t("span",{className:`nc-Label ${u} text-neutral-800 font-medium text-sm dark:text-neutral-300`,"data-nc-id":"Label",children:l}),F=({className:u="flex-1",contentClassName:l="px-6 pt-5 pb-6 ",onChangeImage:f=()=>{},defaultImage:m={sourceUrl:"",id:""}})=>{const[i,p]=n.exports.useState(m),[e,b]=n.exports.useState(!1),[N,s]=n.exports.useState(""),g=n.exports.useId()+"_fileUpload",x=n.exports.useDeferredValue(i.id);n.exports.useEffect(()=>{p(m)},[m.id]),n.exports.useEffect(()=>{f(i)},[x]);const C=async r=>{p({sourceUrl:"",id:"",altText:""})};function j(r){return/(\.jpg|\.jpeg|\.png|\.gif|\.ico|\.webp|\.JPG|\.JPEG|\.PNG|\.GIF)$/i.exec(r)}const L=r=>{if(s(""),r.target.files&&r.target.files[0]){b(!0);const o=r.target.files[0];if(!j(o.name)){s(`${y["File type is not allowed"]}. ${y["Only image files are permitted"]}.`),b(!1);return}const d=new FormData;d.append("file",o),jQuery.ajax({url:window.frontendObject.restVarsEndpoint,method:"POST",processData:!1,contentType:!1,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.frontendObject.restVarsNonce)},data:d}).done(function(a){p({sourceUrl:a.source_url,id:a.id,altText:a.alt_text})}).fail(function(a){var c;const v=((c=a.responseJSON)==null?void 0:c.message)||y.somethingWentWrong;s(v)}).always(function(){b(!1)})}},h=e,k=N;return w("div",{className:u,children:[t("label",{htmlFor:g,className:`block group ${h?"cursor-not-allowed animate-pulse":"cursor-pointer"}`,children:w("div",{className:`relative mt-1 flex justify-center border-2 border-neutral-300 dark:border-neutral-6000 border-dashed rounded-xl ${l}`,children:[!!i.sourceUrl&&!h&&t("div",{className:"opacity-0 group-hover:opacity-100 absolute right-2.5 top-2.5 z-10 p-1.5 bg-neutral-900 dark:bg-neutral-700 text-white rounded-md cursor-pointer \r transition-opacity duration-300 ",title:"Delete image",onClick:r=>{r.preventDefault(),C(String(i.id))},children:w("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:[t("path",{d:"M21 5.97998C17.67 5.64998 14.32 5.47998 10.98 5.47998C9 5.47998 7.02 5.57998 5.04 5.77998L3 5.97998",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t("path",{d:"M8.5 4.97L8.72 3.66C8.88 2.71 9 2 10.69 2H13.31C15 2 15.13 2.75 15.28 3.67L15.5 4.97",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t("path",{d:"M18.85 9.14001L18.2 19.21C18.09 20.78 18 22 15.21 22H8.79002C6.00002 22 5.91002 20.78 5.80002 19.21L5.15002 9.14001",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t("path",{d:"M10.33 16.5H13.66",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t("path",{d:"M9.5 12.5H14.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),w("div",{className:"flex-1 space-y-1 text-center",children:[i.sourceUrl&&t("div",{className:"w-full max-w-md mx-auto",children:t("div",{className:"w-full aspect-w-16 aspect-h-8",children:t("img",{src:i.sourceUrl,className:"rounded-lg object-cover shadow-lg",alt:""})})}),!i.sourceUrl&&t("svg",{className:"mx-auto h-12 w-12 text-neutral-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:t("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),t("div",{className:"flex justify-center text-sm text-neutral-6000 dark:text-neutral-300",children:w("label",{className:"relative flex-shrink-0 cursor-pointer  rounded-md font-medium text-primary-6000 dark:text-primary-400 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500",children:[h?t(P,{className:"ml-3 text-blue-600 ",childClassName:"w-5 h-5"}):t("span",{children:i.sourceUrl?y["Click to change"]:y["Upload a file"]}),t("input",{disabled:h,id:g,name:"fileUpload",type:"file",className:"sr-only",onChange:L})]})}),t("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"PNG, JPG, GIF, WEBP, SVG ..."})]})]})}),k&&t(W,{containerClassName:"text-sm mt-4",type:"error",children:k})]})},O=G.forwardRef(({className:u="",children:l,...f},m)=>t("textarea",{ref:m,className:`block w-full text-sm rounded-xl border-neutral-200 focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 bg-white dark:border-neutral-700 dark:focus:ring-primary-6000 dark:focus:ring-opacity-25 dark:bg-neutral-900 ${u}`,rows:4,...f,children:l}));export{F as I,V as L,O as T,H as u};
