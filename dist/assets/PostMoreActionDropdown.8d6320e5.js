import{h as w,i as x,j as t,a as f,N as s,k as y,W as h,M as b,l as D,F as N,m as k}from"./main.c317bc88.js";import{N as C,B as P}from"./NcModal.6f3d30d6.js";import"./ButtonClose.1a90cee2.js";const j=({show:d,onCloseModal:r,postDataBaseId:a,isReloadAfterDelete:l=!1})=>{const[o,i]=w.useState(!1),c=x(),u=async()=>{i(!0),await jQuery.ajax({url:window.frontendObject.restUrl+"wp/v2/posts/"+a,method:"DELETE",processData:!1,contentType:!1,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",window.frontendObject.restVarsNonce)}}).done(function(e){h(s["Post deleted successfully."],{type:"success",transition:b}),c(D(a)),l&&setTimeout(()=>{window.location.reload()},800)}).fail(function(e){var n;const p=((n=e.responseJSON)==null?void 0:n.message)||s.somethingWentWrong;h(p,{type:"error",transition:b,autoClose:4e3})}).always(function(){r(),i(!1)})};return t(C,{renderTrigger:()=>null,isOpenProp:d,renderContent:()=>f("div",{children:[t("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-200",children:s["Delete post"]}),t("span",{className:"text-sm",children:s["Are you sure you want to delete this post? You cannot undo this action."]}),f("div",{className:"mt-4 space-x-3",children:[t(P,{loading:o,onClick:u,type:"submit",disabled:o,children:s["Delete post"]}),t(y,{type:"button",loading:o,onClick:r,disabled:o,children:s.Cancel})]})]}),onCloseModal:r,contentExtraClass:"max-w-screen-sm",modalTitle:""})},M=({className:d="text-neutral-700 bg-neutral-50 hover:bg-blue-50 hover:text-blue-700 dark:hover:text-blue-700 dark:text-neutral-100 dark:bg-neutral-800 dark:hover:bg-blue-100 transition-colors duration-300 h-7 w-7 sm:h-8 sm:w-8",panelMenusClass:r="w-52 right-0 bottom-0 origin-bottom-right",href:a,postDataBaseId:l,isReloadAfterDelete:o=!1,hasComment:i=!0,data:c})=>{const[u,m]=w.useState(!1);let e=[{icon:"las la-edit",id:"edit",name:"Edit post",href:frontendObject.pagePostSubmissionEditorUrl+"?pid="+l+"&action=edit"},{icon:"las la-comment-dots",id:"gotocoommment",name:"Comment this post",href:`${a}#comment`},{icon:"las la-trash-alt",id:"delete_post",name:"Delete post"}];e=i?e:e.filter((n,g)=>g!=1),c&&(e=c);const p=n=>{n.id==="delete_post"&&m(!0),console.log("clicked",n)};return f(N,{children:[t(k,{data:e,className:`nc-PostMoreActionDropdown relative rounded-full flex items-center justify-center focus:outline-none ${d}`,panelMenusClass:r,onClickItem:p}),t(j,{show:u,onCloseModal:()=>m(!1),postDataBaseId:l,isReloadAfterDelete:o})]})};export{M as default};
