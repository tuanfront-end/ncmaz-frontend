var O=Object.defineProperty,P=Object.defineProperties;var A=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var h=(t,e,s)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,l=(t,e)=>{for(var s in e||(e={}))j.call(e,s)&&h(t,s,e[s]);if(_)for(var s of _(e))w.call(e,s)&&h(t,s,e[s]);return t},m=(t,e)=>P(t,A(e));import{h as k,U as B,aG as z,r as G,a as p,j as o,D as L,N as C,k as Q}from"./main.be12d964.js";import{c as X}from"./queryGraphql.696fbce4.js";import{a as q,C as D}from"./Card3SmallSkeleton.23f7642d.js";import{B as U}from"./ButtonPrimary.c03933c8.js";import"./NcImage.b533d3e4.js";import"./PostCardMeta.28979e3d.js";import"./formatDate.5c5d9c4d.js";import"./index.6d2dc887.js";const R=({searchText:t})=>{var u;const e=k.useRef(null),s=k.useRef(null),c=15;let f={},g="";g=X,f={first:c,search:t};const v=B`
    ${g}
  `,{loading:d,error:E,data:n,fetchMore:S}=z(v,{notifyOnNetworkStatusChange:!0,variables:f});G.exports.useEffect(()=>{var a;(a=n==null?void 0:n.posts.pageInfo)==null||a.total},[n]);const i=(n==null?void 0:n.posts.edges)||[],T=(a,{fetchMoreResult:r})=>{var x,y,b;return(x=r==null?void 0:r.posts)!=null&&x.edges.length?m(l({},r),{posts:m(l({},r.posts),{edges:[...(y=a==null?void 0:a.posts)==null?void 0:y.edges,...(b=r==null?void 0:r.posts)==null?void 0:b.edges]})}):a},I=()=>{if(!S)return;const a=i.map(r=>r.node.postId);S({variables:{first:c,notIn:a},updateQuery:T})},N=d&&!i.length;return p("div",{className:"bg-white dark:bg-neutral-800",children:[p("div",{ref:e,className:"max-h-[70vh] overflow-y-auto border-t border-neutral-200 dark:border-neutral-700",children:[o(L,{className:"my-5 flex justify-center",data:i,error:E,isSkeleton:N}),N||i.length?p("div",{className:"grid grid-cols-1 divide-y divide-neutral-200 dark:divide-neutral-700",children:[i.map(a=>o(q,{className:"p-4 hover:bg-neutral-100 dark:hover:bg-neutral-700",post:a.node},a.node.id)),o("div",{ref:s,className:"hidden"}),d&&Array.from("88888888").map((a,r)=>o(D,{className:"p-4 "},r)),((u=n==null?void 0:n.posts.pageInfo)==null?void 0:u.hasNextPage)&&o("div",{className:"p-4",children:o(U,{className:"inline-flex",sizeClass:"px-4 py-2 sm:py-2.5",fontSize:"text-xs sm:text-sm font-medium",onClick:I,loading:d,children:C.showMeMore})})]}):null]}),o("div",{className:"flex justify-between space-x-1 p-3 sm:p-4 border-t border-neutral-200 dark:border-neutral-700",children:o(Q,{className:"ml-auto",sizeClass:"px-4 py-2 sm:py-2.5",fontSize:"text-xs sm:text-sm font-medium",type:"submit",children:C["Go to search page"]})})]})};export{R as default};
