import{Y as M,Z as S,$ as _,a0 as D,r as l,a1 as R,a2 as T,a3 as I,j as e,a as w,N as y,X as W,h as $}from"./main.2b5abd22.js";function H(i,o){var f=S(o==null?void 0:o.client);_(i,D.Mutation);var m=l.exports.useState({called:!1,loading:!1,client:f}),s=m[0],p=m[1],r=l.exports.useRef({result:s,mutationId:0,isMounted:!0,client:f,mutation:i,options:o});Object.assign(r.current,{client:f,options:o,mutation:i});var b=l.exports.useCallback(function(c){c===void 0&&(c={});var g=r.current,x=g.client,L=g.options,j=g.mutation,N=M(M({},L),{mutation:j});!r.current.result.loading&&!N.ignoreResults&&p(r.current.result={loading:!0,error:void 0,data:void 0,called:!0,client:x});var h=++r.current.mutationId,k=R(N,c);return x.mutate(k).then(function(t){var n,d,a,v=t.data,u=t.errors,U=u&&u.length>0?new T({graphQLErrors:u}):void 0;if(h===r.current.mutationId&&!k.ignoreResults){var E={called:!0,loading:!1,data:v,error:U,client:x};r.current.isMounted&&!I(r.current.result,E)&&p(r.current.result=E)}return(d=(n=r.current.options)===null||n===void 0?void 0:n.onCompleted)===null||d===void 0||d.call(n,t.data),(a=c.onCompleted)===null||a===void 0||a.call(c,t.data),t}).catch(function(t){var n,d,a,v;if(h===r.current.mutationId&&r.current.isMounted){var u={loading:!1,error:t,data:void 0,called:!0,client:x};I(r.current.result,u)||p(r.current.result=u)}if(((n=r.current.options)===null||n===void 0?void 0:n.onError)||k.onError)return(a=(d=r.current.options)===null||d===void 0?void 0:d.onError)===null||a===void 0||a.call(d,t),(v=c.onError)===null||v===void 0||v.call(c,t),{data:void 0,errors:t};throw t})},[]),C=l.exports.useCallback(function(){p({called:!1,loading:!1,client:f})},[]);return l.exports.useEffect(function(){return r.current.isMounted=!0,function(){r.current.isMounted=!1}},[]),[b,M({reset:C},s)]}const G=({className:i="text-primary-500",childClassName:o="w-8 h-8"})=>e("div",{className:`CircleLoading inline-flex items-center justify-center ${i}`,children:w("svg",{className:`animate-spin ${o}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),e("path",{className:"opacity-90",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),P=({className:i="block",children:o})=>e("span",{className:`nc-Label ${i} text-neutral-800 font-medium text-sm dark:text-neutral-300`,"data-nc-id":"Label",children:o}),V=({className:i="flex-1",contentClassName:o="px-6 pt-5 pb-6 ",onChangeImage:f=()=>{},defaultImage:m={sourceUrl:"",id:""}})=>{const[s,p]=l.exports.useState(m),[r,b]=l.exports.useState(!1),[C,c]=l.exports.useState(""),g=l.exports.useId()+"_fileUpload",x=l.exports.useDeferredValue(s.id);l.exports.useEffect(()=>{p(m)},[m.id]),l.exports.useEffect(()=>{f(s)},[x]);const L=async t=>{p({sourceUrl:"",id:"",altText:""})};function j(t){return/(\.jpg|\.jpeg|\.png|\.gif|\.ico|\.webp|\.JPG|\.JPEG|\.PNG|\.GIF)$/i.exec(t)}const N=t=>{if(c(""),t.target.files&&t.target.files[0]){b(!0);const n=t.target.files[0];if(!j(n.name)){c(`${y["File type is not allowed"]}. ${y["Only image files are permitted"]}.`),b(!1);return}const d=new FormData;d.append("file",n),jQuery.ajax({url:window.frontendObject.restVarsEndpoint,method:"POST",processData:!1,contentType:!1,beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.frontendObject.restVarsNonce)},data:d}).done(function(a){p({sourceUrl:a.source_url,id:a.id,altText:a.alt_text})}).fail(function(a){var u;const v=((u=a.responseJSON)==null?void 0:u.message)||y.somethingWentWrong;c(v)}).always(function(){b(!1)})}},h=r,k=C;return w("div",{className:i,children:[e("label",{htmlFor:g,className:`block group ${h?"cursor-not-allowed animate-pulse":"cursor-pointer"}`,children:w("div",{className:`relative mt-1 flex justify-center border-2 border-neutral-300 dark:border-neutral-6000 border-dashed rounded-xl ${o}`,children:[!!s.sourceUrl&&!h&&e("div",{className:"opacity-0 group-hover:opacity-100 absolute right-2.5 top-2.5 z-10 p-1.5 bg-neutral-900 dark:bg-neutral-700 text-white rounded-md cursor-pointer \r transition-opacity duration-300 ",title:"Delete image",onClick:t=>{t.preventDefault(),L(String(s.id))},children:w("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"none",children:[e("path",{d:"M21 5.97998C17.67 5.64998 14.32 5.47998 10.98 5.47998C9 5.47998 7.02 5.57998 5.04 5.77998L3 5.97998",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M8.5 4.97L8.72 3.66C8.88 2.71 9 2 10.69 2H13.31C15 2 15.13 2.75 15.28 3.67L15.5 4.97",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M18.85 9.14001L18.2 19.21C18.09 20.78 18 22 15.21 22H8.79002C6.00002 22 5.91002 20.78 5.80002 19.21L5.15002 9.14001",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M10.33 16.5H13.66",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),e("path",{d:"M9.5 12.5H14.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})}),w("div",{className:"flex-1 space-y-1 text-center",children:[s.sourceUrl&&e("div",{className:"w-full max-w-md mx-auto",children:e("div",{className:"w-full aspect-w-16 aspect-h-8",children:e("img",{src:s.sourceUrl,className:"rounded-lg object-cover shadow-lg",alt:""})})}),!s.sourceUrl&&e("svg",{className:"mx-auto h-12 w-12 text-neutral-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true",children:e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),e("div",{className:"flex justify-center text-sm text-neutral-6000 dark:text-neutral-300",children:w("label",{className:"relative flex-shrink-0 cursor-pointer  rounded-md font-medium text-primary-6000 dark:text-primary-400 hover:text-primary-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-primary-500",children:[h?e(G,{className:"ml-3 text-blue-600 ",childClassName:"w-5 h-5"}):e("span",{children:s.sourceUrl?y["Click to change"]:y["Upload a file"]}),e("input",{disabled:h,id:g,name:"fileUpload",type:"file",className:"sr-only",onChange:N})]})}),e("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"PNG, JPG, GIF, WEBP, SVG ..."})]})]})}),k&&e(W,{containerClassName:"text-sm mt-4",type:"error",children:k})]})},B=$.forwardRef(({className:i="",children:o,...f},m)=>e("textarea",{ref:m,className:`block w-full text-sm rounded-xl border-neutral-200 focus:border-primary-300 focus:ring focus:ring-primary-200 focus:ring-opacity-50 bg-white dark:border-neutral-700 dark:focus:ring-primary-6000 dark:focus:ring-opacity-25 dark:bg-neutral-900 ${i}`,rows:4,...f,children:o}));export{G as C,V as I,P as L,B as T,H as u};
