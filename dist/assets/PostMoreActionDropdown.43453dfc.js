import{R as b,w as g,j as t,b as u,N as n,W as f,M as h,x,F as y,y as N}from"./main.85963571.js";import{N as D,B as k}from"./NcModal.55dd2582.js";import{B as C}from"./ButtonSecondary.f276bf76.js";import"./Button.b71e29cf.js";import"./ButtonClose.e0af6517.js";const P=({show:c,onCloseModal:s,postDataBaseId:r,isReloadAfterDelete:a=!1})=>{const[o,l]=b.useState(!1),d=g(),i=async()=>{l(!0),await jQuery.ajax({url:window.frontendObject.restUrl+"wp/v2/posts/"+r,method:"DELETE",processData:!1,contentType:!1,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",window.frontendObject.restVarsNonce)}}).done(function(e){f(n["Post deleted successfully."],{type:"success",transition:h}),d(x(r)),a&&setTimeout(()=>{window.location.reload()},800)}).fail(function(e){var p;const w=((p=e.responseJSON)==null?void 0:p.message)||n.somethingWentWrong;f(w,{type:"error",transition:h,autoClose:4e3})}).always(function(){s(),l(!1)})};return t(D,{renderTrigger:()=>null,isOpenProp:c,renderContent:()=>u("div",{children:[t("h3",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-200",children:n["Delete post"]}),t("span",{className:"text-sm",children:n["Are you sure you want to delete this post? You cannot undo this action."]}),u("div",{className:"mt-4 space-x-3",children:[t(k,{loading:o,onClick:i,type:"submit",disabled:o,children:n["Delete post"]}),t(C,{type:"button",loading:o,onClick:s,disabled:o,children:n.Cancel})]})]}),onCloseModal:s,contentExtraClass:"max-w-screen-sm",modalTitle:""})},E=({className:c="text-neutral-700 bg-neutral-50 hover:bg-blue-50 hover:text-blue-700 dark:hover:text-blue-700 dark:text-neutral-100 dark:bg-neutral-800 dark:hover:bg-blue-100 transition-colors duration-300 h-7 w-7 sm:h-8 sm:w-8",panelMenusClass:s="w-52 right-0 bottom-0 origin-bottom-right",href:r,postDataBaseId:a,isReloadAfterDelete:o=!1,data:l=[{icon:"las la-edit",id:"edit",name:"Edit post",href:frontendObject.pagePostSubmissionEditorUrl+"?pid="+a+"&action=edit"},{icon:"las la-comment-dots",id:"gotocoommment",name:"Comment this post",href:`${r}#comment`},{icon:"las la-trash-alt",id:"delete_post",name:"Delete post"}]})=>{const[d,i]=b.useState(!1),m=e=>{e.id==="delete_post"&&i(!0),console.log("clicked",e)};return u(y,{children:[t(N,{data:l,className:`nc-PostMoreActionDropdown relative rounded-full flex items-center justify-center focus:outline-none ${c}`,panelMenusClass:s,onClickItem:m}),t(P,{show:d,onCloseModal:()=>i(!1),postDataBaseId:a,isReloadAfterDelete:o})]})};export{E as default};
