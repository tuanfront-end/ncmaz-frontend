import{r as e,R as t}from"./vendor.3b208adb.js";import{u as a,a as r,L as n}from"./hooks.311923ab.js";import{s as l,c as o,N as s,P as i,a as c,r as d}from"./main.38f90968.js";import{R as u}from"./index.1eeac341.js";import{P as m}from"./PostCardLikeAction.b4c5e7c8.js";const f=({className:f=""})=>{const p=e.exports.useRef(null),x=a(l),h=r(),[v,g]=e.exports.useState(0),[k,w]=e.exports.useState(0),[E,b]=e.exports.useState(0),[y,N]=e.exports.useState(0),[L,j]=e.exports.useState([]),C=e=>{var t,a,r;const n=null==(r=null==(a=null==(t=e.postFormats)?void 0:t.edges[0])?void 0:a.node)?void 0:r.slug;return"post-format-audio"===n?e.ncmazAudioUrl.audioUrl:"post-format-video"===n?e.ncmazVideoUrl.videoUrl:""},M=e=>{let t=Math.floor(e/60),a=""+(e-60*t);return Number(a)<10&&(a="0"+a),t+":"+a},S=e=>{b(parseFloat(e.currentTarget.value))},D=e=>{p.current&&p.current.seekTo(parseFloat(e.currentTarget.value))},P=()=>{if("loading"!==x.state)return"playing"===x.state?h(o("paused")):void h(o("playing"))},B=()=>{p.current&&p.current.seekTo(0),h(d())};return t.createElement("div",{className:`nc-MediaRunningContainerForSafari fixed bottom-0 inset-x-0 flex bg-neutral-900 border-t border-neutral-700 z-30 ${f}`,"data-nc-id":"MediaRunningContainerForSafari"},(()=>{if(!x.postData)return null;const{postId:e}=x.postData,a=x.state;return t.createElement("div",{className:"h-16 w-full flex items-center justify-between"},(e=>{var a,r;const{postId:n,link:l,featuredImage:o,categories:c,title:d,ncPostMetaData:u}=e;return t.createElement("div",{className:"w-1/2 pl-2 md:w-1/4 lg:w-[30%] 2xl:w-1/4  items-center flex-shrink-0 "+(L.includes(n)?"hidden md:flex":"flex")},t.createElement("a",{href:l,className:"relative flex items-center max-w-[240px] xl:flex-grow space-x-3 pl-12"},t.createElement(s,{containerClassName:"absolute left-0 h-full w-12 h-12 flex-shrink-0 transform transition-transform nc-will-change-transform nc-animation-spin rounded-full "+("playing"===x.state?"playing":""),src:null==o?void 0:o.node.sourceUrl,className:"object-cover w-full h-full rounded-full "}),t.createElement("div",{className:"flex-grow overflow-hidden hidden xl:block"},t.createElement("h3",{className:"text-base text-neutral-50 truncate"},d),t.createElement("span",{className:"block text-xs text-neutral-400 truncate"},null==(a=null==c?void 0:c.edges[0])?void 0:a.node.name))),t.createElement("div",{className:"hidden md:flex flex-shrink-0 px-6 dark text-white space-x-2.5"},t.createElement(m,{postId:n,favoriteButtonShortcode:u.favoriteButtonShortcode||""}),t.createElement(i,{href:(null==(r=null==x?void 0:x.postData)?void 0:r.link)||""})))})(x.postData),L.includes(e)?t.createElement("span",{className:"flex pl-2 text-xs lg:text-sm text-red-500"},c.ThistrackwasnotfoundMaybeitHasBeenRemoved||"This track was not found. Maybe it has been removed!"):t.createElement("div",{className:"hidden md:flex flex-grow px-6 items-center justify-center space-x-2.5 text-xs tabular-nums tracking-widest"},t.createElement("div",{className:"flex-shrink-0 w-11 text-right truncate text-neutral-100"},M(Math.floor(k))),t.createElement("div",{className:"h-3 relative flex-grow bg-transparent"},t.createElement("input",{className:"slider absolute z-10 opacity-0 inset-0 h-full w-full cursor-pointer",type:"range",min:0,max:.999999,step:"any",value:E,onChange:S,onMouseUp:D}),t.createElement("div",{className:"absolute h-1 w-full top-1/2 transform -translate-y-1/2 transition-colors rounded-full bg-neutral-400"}),t.createElement("div",{className:"absolute left-0 top-1/2 h-1 min-w-0 transform -translate-y-1/2 transition-colors rounded-full bg-emerald-500 bg-opacity-50",style:{width:100*y+"%"}}),t.createElement("div",{className:"absolute h-1 min-w-0 left-0 top-1/2 transform -translate-y-1/2 transition-colors rounded-full bg-emerald-500",style:{width:100*E+"%"}},t.createElement("span",{className:"absolute -right-1.5 top-1/2 transform -translate-y-1/2 w-3 h-3 rounded-full bg-emerald-500"}))),t.createElement("div",{className:"flex-shrink-0 w-11 text-left truncate text-neutral-400"},M(Math.floor(v)))),t.createElement("div",{className:"w-1/2 md:w-1/4 lg:w-[30%] 2xl:w-1/4 pl-5 h-full relative flex-shrink-0"},t.createElement("div",{className:"absolute right-0 inset-y-0 h-full w-36 max-w-full flex bg-neutral-800 text-neutral-100"},(e=>t.createElement("div",{className:"w-1/2 flex-shrink-0 flex items-center justify-center border-r border-neutral-700 cursor-pointer hover:bg-neutral-700",onClick:P},"loading"===e&&t.createElement(n,{className:"transform scale-50 origin-center"}),"playing"===e&&t.createElement("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},t.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M15.25 6.75V17.25"}),t.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M8.75 6.75V17.25"})),"playing"!==e&&"loading"!==e&&t.createElement("svg",{className:"w-8 h-8",fill:"currentColor",viewBox:"0 0 24 24"},t.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M18.25 12L5.75 5.75V18.25L18.25 12Z"}))))(a),t.createElement("div",{className:"w-1/2 flex-shrink-0 flex items-center justify-center cursor-pointer hover:bg-neutral-700",onClick:B},t.createElement("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24"},t.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M17.25 6.75L6.75 17.25"}),t.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M6.75 6.75L17.25 17.25"}))))))})(),t.createElement("div",{className:"hidden"},null==(R=x.listPostAudio)?void 0:R.map(((e,a)=>{var r;const n=(null==(r=x.postData)?void 0:r.id)===e.id;return t.createElement(u,{key:a,style:{display:"none"},url:e?C(e):"",ref:n?p:null,onError:()=>{j([...L,e.postId])},playing:!!n&&("playing"===x.state||"loading"===x.state),onEnded:n?function(){h(o("ended"))}:void 0,onPlay:n?function(){h(o("playing"))}:void 0,onDuration:n?function(e){g(e)}:void 0,onProgress:n?function(e){b(e.played),N(e.loaded),w(e.playedSeconds)}:void 0})}))));var R};export{f as default};
